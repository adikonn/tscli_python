# 🚀 tsweb_py

> **Потому что отправлять решения через браузер в 2026 году — это прошлый век** 😎


![гифка типа пример работы](example.gif)
CLI клиент для системы тестирования [TestSys](https://tsweb.ru/t/) — твой надёжный помощник для олимпиадного программирования прямо из терминала! 

Забудь про:
- ❌ Поиск нужной страницы в куче вкладок браузера
- ❌ Копипасту кода из IDE в текстовое поле
- ❌ Бесконечное обновление страницы, чтобы узнать вердикт
- ❌ Ручной подсчёт баллов на турнирной таблице

Теперь всё это у тебя в терминале! 💻✨

---

## 📦 Установка

### Быстрый старт

```bash
cd tsweb_py
pip install -e .
```

Вуаля! 🎉 Команда `tsweb_py` теперь доступна глобально.

### 🎯 Tab Completion (автодополнение)

Потому что набирать команды целиком — для слабаков! 

#### Для Bash

Добавь в `~/.bashrc`:

```bash
eval "$(_TSWEB_PY_COMPLETE=bash_source tsweb_py)"
```

Затем:
```bash
source ~/.bashrc
```

#### Для Zsh

Добавь в `~/.zshrc`:

```bash
eval "$(_TSWEB_PY_COMPLETE=zsh_source tsweb_py)"
```

Затем:
```bash
source ~/.zshrc
```

#### Для Fish

Добавь в `~/.config/fish/completions/tsweb_py.fish`:

```bash
eval (env _TSWEB_PY_COMPLETE=fish_source tsweb_py)
```

Теперь жми `Tab` и наслаждайся магией! ✨

---

## 🎮 Использование

### Первый запуск

#### 1️⃣ Авторизация

```bash
tsweb_py login
```

Введи свой логин и пароль от tsweb.ru. Данные сохранятся в `~/.tsweb_py.global` (не волнуйся, никто кроме тебя их не увидит 🔐).

#### 2️⃣ Выбор контеста

```bash
tsweb_py set-contest
```

Выбери контест из списка.

#### 3️⃣ Выбор компилятора

```bash
tsweb_py set-compiler
```

Выбери компилятор по умолчанию.

---

### 🔥 Основные команды

#### 📊 Информация о пользователе

```bash
tsweb_py info
```

Узнай, кто ты и в каком контесте участвуешь (на случай экзистенциального кризиса).

---

#### 📋 Просмотр контеста

```bash
tsweb_py contest show
```

Показывает:
- 📌 Название контеста
- 📝 Список задач
- 🛠️ Доступные компиляторы (текущий отмечен звёздочкой ⭐)

---

#### 📄 Скачать условия

```bash
tsweb_py contest statements
```

Скачивает PDF с условиями задач в текущую директорию.

---
#### 🏆 Турнирная таблица (MONITOR)

```bash
tsweb_py contest monitor
```

**Новая фишка!** 🎊 Смотри standings прямо в терминале:
- 🎨 Цветная подсветка результатов:
  - 🟢 Зелёный = accepted (`+`, `+1`, `+2`...)
  - 🔴 Красный = wrong answer (`-1`, `-2`...)
  - ⚪ Серый = не пытался (`.`)
- 📏 Компактный формат под 80-колоночный терминал (old school, baby! 🕹️)
- 📊 Показывает: имя, результаты по задачам, количество решённых, время, место

Пример вывода:
```
┌──────────────┬─────┬─────┬─────┬────┬────────┬──────┐
│ Team         │ 17A │ 17B │ 17C │ =  │ Time   │ Rank │
├──────────────┼─────┼─────┼─────┼────┼────────┼──────┤
│ Legends      │ +   │ +1  │ .   │ 2  │ 42:15  │ 1    │
│ You          │ +2  │ -1  │ .   │ 1  │ 1:23:45│ 5    │  ← ВОТ ТЫ! 💜
│ Newbies      │ .   │ .   │ -3  │ 0  │ 0:00   │ 10   │
└──────────────┴─────┴─────┴─────┴────┴────────┴──────┘
```

---

#### 📤 Отправка решения

**Способ 1: Интерактивный режим** (рекомендуется 👍)

```bash
tsweb_py contest submit solution.cpp
```

**Способ 2: Явное указание задачи и компилятора**

```bash
tsweb_py contest submit solution.cpp -p 17A -l 3
```

где:
- `-p` или `--problem` — задача (например, `17A`)
- `-l` или `--lang` — номер компилятора от 1 (смотри в `contest show`) (можно без него, будет компилятор который был поставлен по дефолту до этого)

**Способ 3: Автоопределение задачи по имени файла** 

```bash
tsweb_py contest submit 17A.cpp
```

Умный парсер сам найдёт задачу `17A` из имени файла. Главное — следуй паттерну `<номер_контеста><буква_задачи>.<расширение>`.
Программа сама спросит у тебя задачу и компилятор, если не смогла определить автоматически.

**После отправки:**
- ⏳ Программа автоматически отслеживает вердикт в реальном времени
- 🎨 Цветной вывод результатов:
  - 🟢 `OK` — тест пройден ✅
  - 🔴 `WA` — Wrong Answer 💀
  - 🟡 `TL` — Time Limit ⏱️
  - 🔵 `RE` — Runtime Error 💥
  - ⚪ `ML` — Memory Limit 🧠
  - ... и другие

---

#### 📜 Просмотр посылок

```bash
tsweb_py submissions
```

Список всех твоих сабмитов с вердиктами. Полезно, чтобы вспомнить, сколько раз ты словил WA на первом тесте 😂

---

#### 📥 Скачивание ранее отправленного решения

```bash
tsweb_py get-submit
```

**Новая фишка!** 🎁 Забыл где сохранил решение? Не проблема!

Эта команда:
1. Показывает таблицу всех твоих сабмитов
2. Просит ввести ID нужной посылки
3. Скачивает исходный код
4. Сохраняет как `<номер_задачи>.cpp` (например, `17A.cpp`)

**Пример использования:**
```bash
$ tsweb_py get-submit

Available Submissions
┌─────┬─────────┬─────────────────┬────────┬─────────────────────┐
│ ID  │ Problem │ Compiler        │ Result │ Time                │
├─────┼─────────┼─────────────────┼────────┼─────────────────────┤
│ 306 │ 10C     │ GCC12 C++20     │ OK     │ 14.02.2026 02:02:49 │
│ 305 │ 10C     │ GCC12 C++20     │ OK     │ 14.02.2026 02:01:08 │
└─────┴─────────┴─────────────────┴────────┴─────────────────────┘

Enter submission ID to download: 306
✓ Successfully saved to 10C.cpp
```

Удобно для:
- 🔄 Восстановления потерянных решений
- 📝 Сравнения разных версий кода
- 💾 Бэкапа успешных сабмитов

---

#### 🔍 Детальная информация о посылке

```bash
tsweb_py feedback <submission_id>
```

Получи подробные результаты по каждому тесту. Например:

```bash
tsweb_py feedback 123456
```

Покажет:
```
Test 1: OK (15ms, 2.3MB)
Test 2: WA (10ms, 2.1MB)  ← вот где косяк! 🐛
Test 3: OK (20ms, 2.5MB)
...
```

---

#### 🧪 Версия

```bash
tsweb_py version
# или
tsweb_py --version
```

Узнай версию программы (а вдруг там что-то интересное написано 🤔).

---

## 📚 Команды и структура

### Главное меню

```bash
tsweb_py --help
```

```
Commands:
  contest       🏆 Работа с контестом
  feedback      🔍 Детальные результаты посылки
  get-submit    📥 Скачать ранее отправленное решение
  info          👤 Информация о пользователе
  login         🔐 Авторизация
  set-compiler  🛠️ Выбор компилятора по умолчанию
  set-contest   📋 Выбор контеста
  submissions   📜 Список посылок
  version       🔢 Версия программы
```

### Подкоманды contest

```bash
tsweb_py contest --help
```

```
Commands:
  monitor     🏆 Турнирная таблица
  show        📊 Информация о контесте
  statements  📄 Скачать условия (PDF)
  submit      📤 Отправить решение
```

---

## 🗂️ Файлы конфигурации

| Файл | Что хранится | Где находится |
|------|--------------|---------------|
| `.tsweb_py.global` | Логин и пароль 🔐 | `~/.tsweb_py.global` |
| `.tsweb_py.cookies` | Куки сессии 🍪 | `~/.tsweb_py.cookies` |
| `.tsweb_py.local` | Компилятор по умолчанию 🛠️ | Текущая директория |

---

## ✨ Фичи

- ✅ Автоматическая авторизация с сохранением сессии (куки живут вечно! 🍪)
- ✅ Переключение между контестами на лету
- ✅ Отправка решений с real-time трекингом вердикта
- ✅ Автоопределение задачи по имени файла (умно! 🧠)
- ✅ Просмотр всех посылок
- ✅ Детальная информация по тестам
- ✅ **Скачивание ранее отправленных решений** 📥
- ✅ **Турнирная таблица прямо в терминале** 🏆
- ✅ **Отображение дедлайна контеста и оставшегося времени** ⏰
- ✅ Цветной вывод результатов (красиво! 🎨)
- ✅ Динамическая загрузка задач и компиляторов (без хардкода!)
- ✅ Скачивание условий в PDF

---

## 🛠️ Требования

- Python 3.8+ 🐍
- `requests` — для HTTP запросов
- `click` — для CLI магии ✨
- `beautifulsoup4` + `lxml` — для парсинга HTML
- `rich` — для красивых таблиц и цветов 🌈

Всё это автоматически установится через `pip install -e .`

---

## 🤝 Разработчики

Сделано с любовью ❤️ (и болью 💀) командой:
- [**khbminus**](https://github.com/khbminus) - рахмет за форк
- [**adikonn**](https://github.com/adikonn) - вайбкодер

---

## 🐛 Баги и фичи

Нашёл баг? Хочешь новую фичу? 
- Открой issue на GitHub
- Или сделай PR (мы любим контрибьюторов! 🤗)

---

## 📜 Лицензия

Делай с этим кодом что хочешь, только не вини нас за WA на первом тесте! 😂

---

## 🎓 Pro Tips

1. **Используй алиасы:**
   ```bash
   alias ts='tsweb_py'
   alias tss='tsweb_py contest submit'
   alias tsm='tsweb_py contest monitor'
   ```
   
2. **Настрой watch для мониторинга:**
   ```bash
   watch -n 5 tsweb_py contest monitor
   ```
   Обновление каждые 5 секунд! ⚡

3. **Храни решения в отдельной папке для каждого контеста:**
   ```
   contests/
   ├── contest_17/
   │   ├── .tsweb_py.local  ← настройки компилятора
   │   ├── 17A.cpp
   │   ├── 17B.cpp
   │   └── ...
   └── contest_18/
       └── ...
   ```

4. **Используй tab completion — серьёзно!** 
   После установки просто жми `Tab` после `tsweb_py` и радуйся жизни. 🎉

---

## 🚀 Быстрый старт за 30 секунд

```bash
# 1. Установка
pip install -e .

# 2. Авторизация
tsweb_py login

# 3. Выбор контеста
tsweb_py set-contest

# 4. Выбор компилятора (опционально)
tsweb_py set-compiler

# 5. Profit! 🎉
tsweb_py contest submit 17A.cpp
tsweb_py contest monitor
```

---

**Happy coding! 🚀✨**

*P.S. Если ты читаешь это во время контеста, тебе уже пора возвращаться к задачам! ⏰*
